{"ast":null,"code":"import { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../_services/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/forms\";\n\nconst _c0 = function () {\n  return {\n    standalone: true\n  };\n};\n\nexport let LoginComponent = /*#__PURE__*/(() => {\n  class LoginComponent {\n    //Constructor\n    constructor(authService, router) {\n      this.authService = authService;\n      this.router = router;\n      this.email = null;\n      this.password = null; // Subject para cancelar la suscripción\n\n      this.unsubscribe$ = new Subject();\n    }\n\n    ngOnInit() {\n      // Lógica de inicialización del componente\n      //si existe usuario y token redirige a la pagina principal\n      if (this.authService.user != null && this.authService.token != '') {\n        this.router.navigate([\"/\"]);\n      }\n    }\n\n    ngOnDestroy() {\n      // Emitir señal de completado al Subject\n      this.unsubscribe$.next(); // Completar el Subject y limpiar recursos\n\n      this.unsubscribe$.complete();\n    }\n\n    login() {\n      // Si falta algún dato se alerta al usuario mediante alert js\n      if (!this.email || !this.password) {\n        alert(\"REVISA LOS DATOS.\");\n        return;\n      } // Se llama la función del authService en modules\n\n\n      this.authService.login(this.email, this.password).pipe(takeUntil(this.unsubscribe$)) // Cancelar la suscripción cuando se destruye el componente\n      .subscribe(resp => {\n        // Manejar la respuesta del servicio de autenticación aquí\n        // Si la respuesta no contiene errores y devuelve true\n        if (!resp.error && resp) {\n          // Realizar acciones necesarias para una respuesta exitosa\n          document.location.reload();\n        } else {\n          //manejar alertas personalisadas\n          if (resp.error.error == 'Unauthorized' || resp.error.message == 'Unauthenticated') {\n            alert(\"El usuario y/o contraseña son incorrectos.\");\n          } //manejar alertas generales\n          else {\n            alert(\"Credenciales invalidas.\");\n          }\n        }\n      }, error => {\n        // Manejar el error del servicio de autenticación aquí\n        alert(\"ERROR AL IDENTIFICAR.\");\n      });\n    }\n\n  }\n\n  LoginComponent.ɵfac = function LoginComponent_Factory(t) {\n    return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router));\n  };\n\n  LoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginComponent,\n    selectors: [[\"app-login\"]],\n    decls: 55,\n    vars: 6,\n    consts: [[1, \"container\"], [1, \"breadcrumbs\"], [\"href\", \"#\"], [1, \"las\", \"la-home\"], [\"href\", \"#\", 1, \"active\"], [1, \"register_wrap\", \"section_padding_b\"], [1, \"row\", \"justify-content-center\"], [1, \"col-xl-5\", \"col-lg-7\", \"col-md-9\"], [1, \"register_form\", \"padding_default\", \"shadow_sm\"], [1, \"title_2\"], [1, \"mb-4\", \"text_md\"], [\"action\", \"\"], [1, \"row\"], [1, \"col-12\"], [1, \"single_billing_inp\"], [\"type\", \"email\", \"name\", \"email\", \"placeholder\", \"correo@correo.com\", 3, \"ngModel\", \"ngModelOptions\", \"ngModelChange\"], [\"type\", \"password\", \"name\", \"password\", \"placeholder\", \"Contrase\\u00F1a\", 3, \"ngModel\", \"ngModelOptions\", \"ngModelChange\"], [1, \"col-12\", \"mt-2\", \"d-flex\", \"justify-content-between\", \"align-items-center\"], [1, \"custom_check\", \"check_2\", \"d-flex\", \"align-items-center\"], [\"type\", \"checkbox\", \"hidden\", \"\", \"id\", \"save-default\", 1, \"check_inp\"], [\"for\", \"save-default\"], [\"href\", \"forgot-password.html\", 1, \"text-color\"], [1, \"col-12\", \"mt-3\"], [\"type\", \"submit\", 1, \"default_btn\", \"xs_btn\", \"rounded\", \"px-4\", \"d-block\", \"w-100\", 3, \"click\"], [1, \"dif_regway\", \"my-3\"], [1, \"txt\"], [1, \"d-flex\"], [1, \"default_btn\", \"xs_btn\", \"rounded\", \"px-4\", \"d-block\", \"w-50\", \"text-capitalize\", \"bg-facebook\"], [1, \"fab\", \"fa-facebook-f\", \"me-2\"], [1, \"default_btn\", \"xs_btn\", \"rounded\", \"px-4\", \"d-block\", \"w-50\", \"ms-3\", \"text-capitalize\", \"bg-google\"], [1, \"fab\", \"fa-google\", \"me-2\"], [1, \"text-center\", \"mt-3\", \"mb-0\"], [\"routerLink\", \"/auth/registro\", 1, \"text-color\"]],\n    template: function LoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"a\", 2);\n        i0.ɵɵelement(3, \"i\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"a\", 4);\n        i0.ɵɵtext(5, \"Iniciar sesi\\u00F3n\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(6, \"div\", 5)(7, \"div\", 0)(8, \"div\", 6)(9, \"div\", 7)(10, \"div\", 8)(11, \"h4\", 9);\n        i0.ɵɵtext(12, \"Iniciar sesi\\u00F3n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"p\", 10);\n        i0.ɵɵtext(14, \"\\u00A1Bienvenido de vuelta! Inicia sesi\\u00F3n como cliente registrado.\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"form\", 11)(16, \"div\", 12)(17, \"div\", 13)(18, \"div\", 14)(19, \"label\");\n        i0.ɵɵtext(20, \"Correo electr\\u00F3nico\");\n        i0.ɵɵelementStart(21, \"span\");\n        i0.ɵɵtext(22, \"*\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(23, \"input\", 15);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_23_listener($event) {\n          return ctx.email = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(24, \"div\", 13)(25, \"div\", 14)(26, \"label\");\n        i0.ɵɵtext(27, \"Contrase\\u00F1a \");\n        i0.ɵɵelementStart(28, \"span\");\n        i0.ɵɵtext(29, \"*\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(30, \"input\", 16);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_30_listener($event) {\n          return ctx.password = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(31, \"div\", 17)(32, \"div\", 18);\n        i0.ɵɵelement(33, \"input\", 19);\n        i0.ɵɵelementStart(34, \"label\", 20);\n        i0.ɵɵtext(35, \"Acu\\u00E9rdate de m\\u00ED\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(36, \"a\", 21);\n        i0.ɵɵtext(37, \"\\u00BFHas olvidado tu contrase\\u00F1a?\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(38, \"div\", 22)(39, \"button\", 23);\n        i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_39_listener() {\n          return ctx.login();\n        });\n        i0.ɵɵtext(40, \"Ingresar\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(41, \"div\", 24)(42, \"span\", 25);\n        i0.ɵɵtext(43, \"O inicia sesi\\u00F3n con\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(44, \"div\", 26)(45, \"button\", 27);\n        i0.ɵɵelement(46, \"i\", 28);\n        i0.ɵɵtext(47, \" Facebook \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(48, \"button\", 29);\n        i0.ɵɵelement(49, \"i\", 30);\n        i0.ɵɵtext(50, \" Google \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(51, \"p\", 31);\n        i0.ɵɵtext(52, \"\\u00BFNo tienes una cuenta? \");\n        i0.ɵɵelementStart(53, \"a\", 32);\n        i0.ɵɵtext(54, \"Reg\\u00EDstrate ahora\");\n        i0.ɵɵelementEnd()()()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(23);\n        i0.ɵɵproperty(\"ngModel\", ctx.email)(\"ngModelOptions\", i0.ɵɵpureFunction0(4, _c0));\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngModel\", ctx.password)(\"ngModelOptions\", i0.ɵɵpureFunction0(5, _c0));\n      }\n    },\n    directives: [i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.NgForm, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel, i2.RouterLinkWithHref],\n    styles: [\"\"]\n  });\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}