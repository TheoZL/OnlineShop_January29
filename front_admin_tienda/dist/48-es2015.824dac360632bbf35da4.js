"use strict";(self.webpackChunkmetronic_angular_demo1=self.webpackChunkmetronic_angular_demo1||[]).push([[48],{98048:function(t,e,n){n.r(e),n.d(e,{SalesModule:function(){return x}});var i=n(16274),o=n(65543),a=n(42741),r=n(46469);function l(t,e){if(1&t&&(a.ynx(0),a._UZ(1,"br"),a.TgZ(2,"small"),a._uU(3),a.qZA(),a._UZ(4,"br"),a.TgZ(5,"small"),a._uU(6),a.qZA(),a._UZ(7,"br"),a.TgZ(8,"del"),a._uU(9),a.qZA(),a.BQk()),2&t){const t=a.oxw().$implicit,e=a.oxw();a.xp6(3),a.hij("CUP\xd3N: ",t.code_cupon,""),a.xp6(3),a.AsE("DESCUENTO: ",t.discount," ",1==t.type_discount?"%":e.sale.currency_payment,""),a.xp6(3),a.AsE("PRECIO UNITARIO: ",t.precio_unitario," ",e.sale.currency_payment,"")}}function s(t,e){if(1&t&&(a.TgZ(0,"tr"),a.TgZ(1,"td"),a._uU(2),a.qZA(),a.TgZ(3,"td"),a._UZ(4,"img",13),a.qZA(),a.TgZ(5,"td",14),a._uU(6),a.qZA(),a.TgZ(7,"td",14),a._uU(8),a.YNc(9,l,10,5,"ng-container",15),a.qZA(),a.TgZ(10,"td",14),a._uU(11),a.qZA(),a.qZA()),2&t){const t=e.$implicit,n=a.oxw();a.xp6(2),a.Oqu(t.title),a.xp6(2),a.Q6J("src",t.imagen,a.LSH),a.xp6(2),a.Oqu(t.cantidad),a.xp6(2),a.AsE(" ",t.subtotal," ",n.sale.currency_payment," "),a.xp6(1),a.Q6J("ngIf",t.code_cupon),a.xp6(2),a.AsE("",t.total," ",n.sale.currency_payment,"")}}let c=(()=>{class t{constructor(t){this.modal=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(r.Kz))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-detail-sales-list"]],inputs:{sale:"sale"},decls:27,vars:2,consts:[[1,"modal-content"],[1,"modal-header"],["id","example-modal-sizes-title-lg",1,"modal-title","h4"],[1,"icon-2x","text-dark-50","flaticon-cart","mx-2"],[1,"overlay","overlay-block","cursor-default","modal-body"],[1,"row"],[1,"col-12"],[1,"table-responsive"],["id","kt_advance_table_widget_1",1,"table","table-head-custom","table-vertical-center"],[1,"text-left"],[4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-light","btn-elevate","mr-2",3,"click"],["width","90","alt","","srcset","",3,"src"],[1,"text-nowrap"],[4,"ngIf"]],template:function(t,e){1&t&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"div",2),a._UZ(3,"i",3),a._uU(4),a.qZA(),a.qZA(),a.TgZ(5,"div",4),a.TgZ(6,"div",5),a.TgZ(7,"div",6),a.TgZ(8,"div",7),a.TgZ(9,"table",8),a.TgZ(10,"thead"),a.TgZ(11,"tr",9),a.TgZ(12,"th"),a._uU(13,"PRODUCTO"),a.qZA(),a.TgZ(14,"th"),a._uU(15,"PORTADA"),a.qZA(),a.TgZ(16,"th"),a._uU(17,"CANTIDAD"),a.qZA(),a.TgZ(18,"th"),a._uU(19,"SUBTOTAL"),a.qZA(),a.TgZ(20,"th"),a._uU(21,"TOTAL"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(22,"tbody"),a.YNc(23,s,12,8,"tr",10),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(24,"div",11),a.TgZ(25,"button",12),a.NdJ("click",function(){return e.modal.dismiss()}),a._uU(26," Cerrar "),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.xp6(4),a.hij(" VER ORDEN: #",e.sale.n_transaccion," "),a.xp6(19),a.Q6J("ngForOf",e.sale.items))},directives:[i.sg,i.O5],styles:[""]}),t})();var d=n(31887),g=n(29923),Z=n(27813),u=n(4565),p=n(29640);let h=(()=>{class t{constructor(t,e){this.http=t,this.authservice=e,this.isLoadingSubject=new g.X(!1),this.isLoading$=this.isLoadingSubject.asObservable()}allSales(t=1,e){this.isLoadingSubject.next(!0);let n=new d.WM({Authorization:"Bearer "+this.authservice.token});return this.http.post(u.$g+"/sales/all?page="+t,e,{headers:n}).pipe((0,Z.x)(()=>this.isLoadingSubject.next(!1)))}}return t.\u0275fac=function(e){return new(e||t)(a.LFG(d.eN),a.LFG(p.e8))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var A=n(93324);function T(t,e){1&t&&(a.ynx(0),a._UZ(1,"span",26),a.BQk())}function _(t,e){if(1&t&&(a.ynx(0),a.TgZ(1,"option",27),a._uU(2),a.qZA(),a.BQk()),2&t){const t=e.$implicit;a.xp6(1),a.Q6J("value",t.id),a.xp6(1),a.Oqu(t.name)}}function m(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"tr"),a.TgZ(1,"td"),a._uU(2),a.qZA(),a.TgZ(3,"td"),a._uU(4),a.qZA(),a.TgZ(5,"td"),a._uU(6),a.qZA(),a.TgZ(7,"td"),a._uU(8),a.qZA(),a.TgZ(9,"td"),a._uU(10),a.qZA(),a.TgZ(11,"td"),a.TgZ(12,"a",28),a.NdJ("click",function(){const e=a.CHM(t).$implicit;return a.oxw().showDetail(e)}),a.TgZ(13,"span",29),a.O4$(),a.TgZ(14,"svg",30),a.TgZ(15,"g",31),a._UZ(16,"rect",32),a._UZ(17,"path",33),a._UZ(18,"path",34),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=e.$implicit;a.xp6(2),a.Oqu(t.n_transaccion),a.xp6(2),a.Oqu(t.method_payment),a.xp6(2),a.Oqu(t.currency_total),a.xp6(2),a.Oqu(t.user.full_name.toUpperCase()),a.xp6(2),a.AsE("",t.total," ",t.currency_payment,"")}}const q=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-sales"]],decls:1,vars:0,template:function(t,e){1&t&&a._UZ(0,"router-outlet")},directives:[o.lC],styles:[""]}),t})(),children:[{path:"lista-de-ordenes",component:(()=>{class t{constructor(t,e){this._salesServices=t,this._modelService=e,this.SALES=[],this.isLoading$=null,this.search=null,this.categories=[],this.categorie_id="",this.start_date=null,this.end_date=null}ngOnInit(){this.isLoading$=this._salesServices.isLoadingSubject,this.allSales()}allSales(t=1){this._salesServices.allSales(t,{search:this.search,categorie_id:this.categorie_id,start_date:this.start_date,end_date:this.end_date}).subscribe(t=>{console.log(t),this.SALES=t.orders.data,this.categorie_id||(this.categories=t.categories)})}reset(){this.search=null,this.categorie_id=null,this.start_date=null,this.end_date=null,this.allSales()}showDetail(t){const e=this._modelService.open(c,{centered:!0,size:"md"});e.componentInstance.sale=t,e.result.then(()=>{},()=>{})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(h),a.Y36(r.FF))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-sales-list"]],decls:59,vars:11,consts:[[1,"card","card-custom","gutter-b"],[1,"card-header"],[1,"card-title"],[1,"card-label"],[1,"icon-2x","text-dark-50","flaticon-presentation-1","mx-2"],[1,"card-toolbar"],[1,"card-body"],[4,"ngIf"],[1,"row"],[1,"col-3"],["type","text","name","searchText","placeholder","Buscar","value","",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-text","text-muted"],[1,"form-label"],["name","categorie_id",1,"form-control","form-control-solid","form-control-lg",3,"ngModel","ngModelChange"],["value",""],[4,"ngFor","ngForOf"],[1,"col-12"],[1,"input-group","input-group-solid"],["type","date",1,"form-control","form-control-lg","form-control-solid",3,"ngModel","ngModelChange"],["placement","top",1,"btn","btn-primary","ml-2",3,"ngbTooltip","click"],[1,"icon","text-white","flaticon-search-1"],["placement","top",1,"btn","btn-dark","ml-2",3,"ngbTooltip","click"],[1,"icon","text-white","flaticon-refresh"],[1,"table-responsive"],["id","kt_advance_table_widget_1",1,"table","table-head-custom","table-vertical-center"],[1,"text-left"],[1,"spinner","spinner-primary","ml-5"],[3,"value"],["ngbTooltip","Detalle de la Orden","ngbTooltipClass","kt-tooltip",1,"btn","btn-icon","btn-light","btn-hover-info","btn-sm",3,"click"],[1,"svg-icon","svg-icon-md","svg-icon-info"],["xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","width","24px","height","24px","viewBox","0 0 24 24","version","1.1"],["stroke","none","stroke-width","1","fill","none","fill-rule","evenodd"],["x","0","y","0","width","24","height","24"],["d","M18.1446364,11.84388 L17.4471627,16.0287218 C17.4463569,16.0335568 17.4455155,16.0383857 17.4446387,16.0432083 C17.345843,16.5865846 16.8252597,16.9469884 16.2818833,16.8481927 L4.91303792,14.7811299 C4.53842737,14.7130189 4.23500006,14.4380834 4.13039941,14.0719812 L2.30560137,7.68518803 C2.28007524,7.59584656 2.26712532,7.50338343 2.26712532,7.4104669 C2.26712532,6.85818215 2.71484057,6.4104669 3.26712532,6.4104669 L16.9929851,6.4104669 L17.606173,3.78251876 C17.7307772,3.24850086 18.2068633,2.87071314 18.7552257,2.87071314 L20.8200821,2.87071314 C21.4717328,2.87071314 22,3.39898039 22,4.05063106 C22,4.70228173 21.4717328,5.23054898 20.8200821,5.23054898 L19.6915238,5.23054898 L18.1446364,11.84388 Z","fill","#000000","opacity","0.3"],["d","M6.5,21 C5.67157288,21 5,20.3284271 5,19.5 C5,18.6715729 5.67157288,18 6.5,18 C7.32842712,18 8,18.6715729 8,19.5 C8,20.3284271 7.32842712,21 6.5,21 Z M15.5,21 C14.6715729,21 14,20.3284271 14,19.5 C14,18.6715729 14.6715729,18 15.5,18 C16.3284271,18 17,18.6715729 17,19.5 C17,20.3284271 16.3284271,21 15.5,21 Z","fill","#000000"]],template:function(t,e){1&t&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"div",2),a.TgZ(3,"h3",3),a._UZ(4,"i",4),a._uU(5," Lista de ordenes de compras"),a.qZA(),a.qZA(),a._UZ(6,"div",5),a.qZA(),a.TgZ(7,"div",6),a.YNc(8,T,2,0,"ng-container",7),a.ALo(9,"async"),a.TgZ(10,"div",8),a.TgZ(11,"div",9),a.TgZ(12,"input",10),a.NdJ("ngModelChange",function(t){return e.search=t}),a.qZA(),a.TgZ(13,"small",11),a.TgZ(14,"b"),a._uU(15,"Buscar"),a.qZA(),a._uU(16," por nombre de CLIENTE"),a.qZA(),a.qZA(),a.TgZ(17,"div",9),a.TgZ(18,"label",12),a._uU(19,"CATEGORIA : "),a.qZA(),a.TgZ(20,"select",13),a.NdJ("ngModelChange",function(t){return e.categorie_id=t}),a.TgZ(21,"option",14),a._uU(22,"Ninguno"),a.qZA(),a.YNc(23,_,3,2,"ng-container",15),a.qZA(),a.qZA(),a.TgZ(24,"div",9),a.TgZ(25,"div",8),a.TgZ(26,"div",16),a.TgZ(27,"label"),a._uU(28,"Fecha inicio: "),a.qZA(),a.TgZ(29,"div",17),a.TgZ(30,"input",18),a.NdJ("ngModelChange",function(t){return e.start_date=t}),a.qZA(),a.qZA(),a.qZA(),a.TgZ(31,"div",16),a.TgZ(32,"label"),a._uU(33,"Fecha fin: "),a.qZA(),a.TgZ(34,"div",17),a.TgZ(35,"input",18),a.NdJ("ngModelChange",function(t){return e.end_date=t}),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(36,"div",9),a.TgZ(37,"button",19),a.NdJ("click",function(){return e.allSales()}),a._UZ(38,"i",20),a.qZA(),a.TgZ(39,"button",21),a.NdJ("click",function(){return e.reset()}),a._UZ(40,"i",22),a.qZA(),a.qZA(),a.qZA(),a.TgZ(41,"div",23),a.TgZ(42,"table",24),a.TgZ(43,"thead"),a.TgZ(44,"tr",25),a.TgZ(45,"th"),a._uU(46,"N\xb0 TRANSACCI\xd3N"),a.qZA(),a.TgZ(47,"th"),a._uU(48,"METODO DE PAGO"),a.qZA(),a.TgZ(49,"th"),a._uU(50,"TIPO DE MONEDA DE LA VENTA"),a.qZA(),a.TgZ(51,"th"),a._uU(52,"CLIENTE"),a.qZA(),a.TgZ(53,"th"),a._uU(54,"TOTAL"),a.qZA(),a.TgZ(55,"th"),a._uU(56,"ACCI\xd3N"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(57,"tbody"),a.YNc(58,m,19,6,"tr",15),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.xp6(8),a.Q6J("ngIf",a.lcZ(9,9,e.isLoading$)),a.xp6(4),a.Q6J("ngModel",e.search),a.xp6(8),a.Q6J("ngModel",e.categorie_id),a.xp6(3),a.Q6J("ngForOf",e.categories),a.xp6(7),a.Q6J("ngModel",e.start_date),a.xp6(5),a.Q6J("ngModel",e.end_date),a.xp6(2),a.Q6J("ngbTooltip","Filtro"),a.xp6(2),a.Q6J("ngbTooltip","Reset"),a.xp6(19),a.Q6J("ngForOf",e.SALES))},directives:[i.O5,A.Fj,A.JJ,A.On,A.EJ,A.YN,A.Kr,i.sg,r._L],pipes:[i.Ov],styles:[""]}),t})()},{path:"",redirectTo:"lista-de-ordenes",pathMatch:"full"},{path:"**",redirectTo:"lista-de-ordenes",pathMatch:"full"}]}];let f=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[o.Bz.forChild(q)],o.Bz]}),t})();var v=n(73749),b=n(85848);let x=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[i.ez,f,d.JF,A.u5,r.IJ,A.UX,v.vi,b.fA,r.bz,r.M]]}),t})()}}]);