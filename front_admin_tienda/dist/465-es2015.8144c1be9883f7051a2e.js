"use strict";(self.webpackChunkmetronic_angular_demo1=self.webpackChunkmetronic_angular_demo1||[]).push([[465],{86465:function(t,e,i){i.r(e),i.d(e,{DiscountModule:function(){return H}});var n=i(16274),s=i(65543),o=i(28837),c=i(42741),d=i(31887),r=i(29923),l=i(27813),a=i(4565),u=i(29640);let g=(()=>{class t{constructor(t,e){this.http=t,this.authservice=e,this.isLoadingSubject=new r.X(!1),this.isLoading$=this.isLoadingSubject.asObservable()}allDescuentos(t=1,e=""){this.isLoadingSubject.next(!0);let i=new d.WM({Authorization:"Bearer "+this.authservice.token}),n="";return e&&(n="&search="+e),this.http.get(a.$g+"/descuentos/all?page="+t+n,{headers:i}).pipe((0,l.x)(()=>this.isLoadingSubject.next(!1)))}configAll(){this.isLoadingSubject.next(!0);let t=new d.WM({Authorization:"Bearer "+this.authservice.token});return this.http.get(a.$g+"/cupones/config_all",{headers:t}).pipe((0,l.x)(()=>this.isLoadingSubject.next(!1)))}showDescuento(t){this.isLoadingSubject.next(!0);let e=new d.WM({Authorization:"Bearer "+this.authservice.token});return this.http.get(a.$g+"/descuentos/show/"+t,{headers:e}).pipe((0,l.x)(()=>this.isLoadingSubject.next(!1)))}createDescuento(t){this.isLoadingSubject.next(!0);let e=new d.WM({Authorization:"Bearer "+this.authservice.token});return this.http.post(a.$g+"/descuentos/add",t,{headers:e}).pipe((0,l.x)(()=>this.isLoadingSubject.next(!1)))}updateDescuento(t,e){this.isLoadingSubject.next(!0);let i=new d.WM({Authorization:"Bearer "+this.authservice.token});return this.http.put(a.$g+"/descuentos/update/"+t,e,{headers:i}).pipe((0,l.x)(()=>this.isLoadingSubject.next(!1)))}deleteDescuento(t){this.isLoadingSubject.next(!0);let e=new d.WM({Authorization:"Bearer "+this.authservice.token});return this.http.delete(a.$g+"/descuentos/delete/"+t,{headers:e}).pipe((0,l.x)(()=>this.isLoadingSubject.next(!1)))}}return t.\u0275fac=function(e){return new(e||t)(c.LFG(d.eN),c.LFG(u.e8))},t.\u0275prov=c.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var p=i(2610),Z=i(93324);function h(t,e){1&t&&(c.ynx(0),c._UZ(1,"span",28),c.BQk())}function A(t,e){if(1&t&&(c.ynx(0),c.TgZ(1,"option",32),c._uU(2),c.qZA(),c.BQk()),2&t){const t=e.$implicit;c.xp6(1),c.Q6J("value",t.id),c.xp6(1),c.Oqu(t.title)}}function _(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div",18),c.TgZ(1,"label",16),c._uU(2,"PRODUCTOS : "),c.qZA(),c.TgZ(3,"select",29),c.NdJ("ngModelChange",function(e){return c.CHM(t),c.oxw().product_id=e}),c.TgZ(4,"option",30),c._uU(5,"Ninguno"),c.qZA(),c.YNc(6,A,3,2,"ng-container",31),c.qZA(),c.qZA()}if(2&t){const t=c.oxw();c.xp6(3),c.Q6J("ngModel",t.product_id),c.xp6(3),c.Q6J("ngForOf",t.products)}}function T(t,e){if(1&t&&(c.ynx(0),c.TgZ(1,"option",32),c._uU(2),c.qZA(),c.BQk()),2&t){const t=e.$implicit;c.xp6(1),c.Q6J("value",t.id),c.xp6(1),c.Oqu(t.name)}}function f(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div",18),c.TgZ(1,"label",16),c._uU(2,"CATEGORIA : "),c.qZA(),c.TgZ(3,"select",33),c.NdJ("ngModelChange",function(e){return c.CHM(t),c.oxw().categorie_id=e}),c.TgZ(4,"option",30),c._uU(5,"Ninguno"),c.qZA(),c.YNc(6,T,3,2,"ng-container",31),c.qZA(),c.qZA()}if(2&t){const t=c.oxw();c.xp6(3),c.Q6J("ngModel",t.categorie_id),c.xp6(3),c.Q6J("ngForOf",t.categories)}}function q(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c.TgZ(4,"button",38),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw(2).productD(e)}),c._uU(5,"-"),c.qZA(),c.qZA(),c.qZA()}if(2&t){const t=e.$implicit;c.xp6(2),c.hij(" ",t.name," ")}}function b(t,e){if(1&t&&(c.TgZ(0,"div",34),c.TgZ(1,"div",35),c.TgZ(2,"table",36),c.TgZ(3,"thead"),c.TgZ(4,"tr",37),c.TgZ(5,"th"),c._uU(6,"PRODUCTOS"),c.qZA(),c.TgZ(7,"th"),c._uU(8,"Acci\xf3n"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(9,"tbody"),c.YNc(10,q,6,1,"tr",31),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t){const t=c.oxw();c.xp6(10),c.Q6J("ngForOf",t.products_selected)}}function v(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c.TgZ(4,"button",38),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw(2).categorieD(e)}),c._uU(5,"-"),c.qZA(),c.qZA(),c.qZA()}if(2&t){const t=e.$implicit;c.xp6(2),c.hij(" ",t.name," ")}}function m(t,e){if(1&t&&(c.TgZ(0,"div",34),c.TgZ(1,"div",35),c.TgZ(2,"table",36),c.TgZ(3,"thead"),c.TgZ(4,"tr",37),c.TgZ(5,"th"),c._uU(6,"CATEGORIAS"),c.qZA(),c.TgZ(7,"th"),c._uU(8,"Acci\xf3n"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(9,"tbody"),c.YNc(10,v,6,1,"tr",31),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t){const t=c.oxw();c.xp6(10),c.Q6J("ngForOf",t.categories_selected)}}let x=(()=>{class t{constructor(t,e){this._descuentosServices=t,this.toaster=e,this.type_discount=1,this.discount=null,this.type_dis=1,this.categories_selected=[],this.products_selected=[],this.categories=[],this.products=[],this.product_id=null,this.categorie_id=null,this.start_date=null,this.end_date=null}ngOnInit(){this.isLoading$=this._descuentosServices.isLoadingSubject,this.configAll()}configAll(){this._descuentosServices.configAll().subscribe(t=>{console.log(t),this.categories=t.categories,this.products=t.products})}checkedTypeD(t){this.type_discount=t}checkedTypePC(t){this.type_dis=t,this.products_selected=[],this.categories_selected=[],this.product_id=null,this.categorie_id=null}addObject(){if(1==this.type_dis){let t=this.products.find(t=>t.id==this.product_id);if(-1!=this.products_selected.findIndex(t=>t.id==this.product_id))return void this.toaster.open(o.a,{text:"danger-'EL PRODUCTO YA FUE SELECCIONADO.'"});this.product_id=null,this.products_selected.push({name:t.title,id:t.id})}else{let t=this.categories.find(t=>t.id==this.categorie_id);if(-1!=this.categories_selected.findIndex(t=>t.id==this.categorie_id))return void this.toaster.open(o.a,{text:"danger-'EL CATEGORIA YA FUE SELECCIONADO.'"});this.categorie_id=null,this.categories_selected.push({name:t.name,id:t.id})}}newDiscount(){this.discount<=0?this.toaster.open(o.a,{text:"danger-'EL DESCUENTO TIENE QUE SER MAYOR A 0.'"}):this.start_date&&this.end_date?1!=this.type_dis||0!=this.products_selected.length?2!=this.type_dis||0!=this.categories_selected.length?this._descuentosServices.createDescuento({type_discount:this.type_discount,discount:this.discount,type:this.type_dis,start_date:this.start_date,end_date:this.end_date,products_selected:this.products_selected,categories_selected:this.categories_selected}).subscribe(t=>(console.log(t),403==t.message?void this.toaster.open(o.a,{text:`danger-'${t.message_text}.'`}):(this.toaster.open(o.a,{text:"primary-'SE HA REGISTRADO EL DESCUENTO CORRECTAMENTE.'"}),this.type_discount=1,this.discount=null,this.type_dis=1,this.start_date=null,this.end_date=null,this.products_selected=[],void(this.categories_selected=[])))):this.toaster.open(o.a,{text:"danger-'NECESITAS AGREGAR UNA CATEGORIA.'"}):this.toaster.open(o.a,{text:"danger-'NECESITAS AGREGAR UN PRODUCTO.'"}):this.toaster.open(o.a,{text:"danger-'LAS FECHA DE INICIO Y FIN SON OBLIGATORIAS.'"})}productD(t){let e=this.products_selected.findIndex(e=>e.id==t.id);-1!=e&&this.products_selected.splice(e,1)}categorieD(t){let e=this.categories_selected.findIndex(e=>e.id==t.id);-1!=e&&this.categories_selected.splice(e,1)}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(g),c.Y36(p.x7))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-add-new-discount"]],decls:68,vars:14,consts:[[1,"card","card-custom","gutter-b"],[1,"card-header"],[1,"card-title"],[1,"card-label"],[1,"icon-2x","text-dark-50","flaticon-interface-3","mx-2"],[1,"card-toolbar"],[1,"card-body"],[4,"ngIf"],[1,"form-group","row"],[1,"col-3"],[1,"form-group"],[1,"radio-inline"],[1,"radio"],["type","radio","name","radiosC","value","1",3,"checked","click"],["type","radio","name","radiosC","value","2",3,"checked","click"],[1,"form-text","text-muted"],[1,"form-label"],["type","number","name","discount","placeholder","50 %","autocomplete","off",1,"form-control","form-control-solid","form-control-lg",3,"ngModel","ngModelChange"],[1,"col-4"],[1,"input-group","input-group-solid"],["type","date",1,"form-control","form-control-lg","form-control-solid",3,"ngModel","ngModelChange"],["type","radio","name","radiosPC","value","1",3,"checked","click"],["type","radio","name","radiosPC","value","2",3,"checked","click"],["class","col-4",4,"ngIf"],[1,"col-1"],[1,"btn","btn-success",3,"click"],["class","col-12",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"spinner","spinner-primary","ml-5"],["name","product_id",1,"form-control","form-control-solid","form-control-lg",3,"ngModel","ngModelChange"],["value",""],[4,"ngFor","ngForOf"],[3,"value"],["name","categorie_id",1,"form-control","form-control-solid","form-control-lg",3,"ngModel","ngModelChange"],[1,"col-12"],[1,"table-responsive"],["id","kt_advance_table_widget_1",1,"table","table-head-custom","table-vertical-center"],[1,"text-left"],[1,"btn","btn-sm","btn-danger",3,"click"]],template:function(t,e){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"h3",3),c._UZ(4,"i",4),c._uU(5," REGISTRAR NUEVO DESCUENTO"),c.qZA(),c.qZA(),c._UZ(6,"div",5),c.qZA(),c.TgZ(7,"div",6),c.YNc(8,h,2,0,"ng-container",7),c.ALo(9,"async"),c.TgZ(10,"div",8),c.TgZ(11,"div",9),c.TgZ(12,"div",10),c.TgZ(13,"label"),c._uU(14,"TIPO DE DESCUENTO: "),c.qZA(),c.TgZ(15,"div",11),c.TgZ(16,"label",12),c.TgZ(17,"input",13),c.NdJ("click",function(){return e.checkedTypeD(1)}),c.qZA(),c._UZ(18,"span"),c._uU(19," PORCENTAJE "),c.qZA(),c.TgZ(20,"label",12),c.TgZ(21,"input",14),c.NdJ("click",function(){return e.checkedTypeD(2)}),c.qZA(),c._UZ(22,"span"),c._uU(23," MONEDA "),c.qZA(),c.qZA(),c.TgZ(24,"span",15),c._uU(25,"Selec. una opci\xf3n"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(26,"div",9),c.TgZ(27,"label",16),c._uU(28,"DESCUENTO: "),c.qZA(),c.TgZ(29,"input",17),c.NdJ("ngModelChange",function(t){return e.discount=t}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(30,"div",8),c.TgZ(31,"div",18),c.TgZ(32,"label"),c._uU(33,"Fecha inicio: "),c.qZA(),c.TgZ(34,"div",19),c.TgZ(35,"input",20),c.NdJ("ngModelChange",function(t){return e.start_date=t}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(36,"div",18),c.TgZ(37,"label"),c._uU(38,"Fecha fin: *"),c.qZA(),c.TgZ(39,"div",19),c.TgZ(40,"input",20),c.NdJ("ngModelChange",function(t){return e.end_date=t}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(41,"div",8),c.TgZ(42,"div",9),c.TgZ(43,"div",10),c.TgZ(44,"label"),c._uU(45,"TIPO DE PRODUCTOS/CATEGORIAS: "),c.qZA(),c.TgZ(46,"div",11),c.TgZ(47,"label",12),c.TgZ(48,"input",21),c.NdJ("click",function(){return e.checkedTypePC(1)}),c.qZA(),c._UZ(49,"span"),c._uU(50," PRODUCTOS "),c.qZA(),c.TgZ(51,"label",12),c.TgZ(52,"input",22),c.NdJ("click",function(){return e.checkedTypePC(2)}),c.qZA(),c._UZ(53,"span"),c._uU(54," CATEGORIAS "),c.qZA(),c.qZA(),c.TgZ(55,"span",15),c._uU(56,"Selec. una opci\xf3n"),c.qZA(),c.qZA(),c.qZA(),c.YNc(57,_,7,2,"div",23),c.YNc(58,f,7,2,"div",23),c.TgZ(59,"div",24),c.TgZ(60,"button",25),c.NdJ("click",function(){return e.addObject()}),c._uU(61,"+"),c.qZA(),c.qZA(),c.YNc(62,b,11,1,"div",26),c.YNc(63,m,11,1,"div",26),c.qZA(),c.TgZ(64,"div",8),c.TgZ(65,"div",9),c.TgZ(66,"button",27),c.NdJ("click",function(){return e.newDiscount()}),c._uU(67,"AGREGAR NUEVO DESCUENTO"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(8),c.Q6J("ngIf",c.lcZ(9,12,e.isLoading$)),c.xp6(9),c.Q6J("checked",1==e.type_discount),c.xp6(4),c.Q6J("checked",2==e.type_discount),c.xp6(8),c.Q6J("ngModel",e.discount),c.xp6(6),c.Q6J("ngModel",e.start_date),c.xp6(5),c.Q6J("ngModel",e.end_date),c.xp6(8),c.Q6J("checked",1==e.type_dis),c.xp6(4),c.Q6J("checked",2==e.type_dis),c.xp6(5),c.Q6J("ngIf",1==e.type_dis),c.xp6(1),c.Q6J("ngIf",2==e.type_dis),c.xp6(4),c.Q6J("ngIf",1==e.type_dis),c.xp6(1),c.Q6J("ngIf",2==e.type_dis))},directives:[n.O5,Z.wV,Z.Fj,Z.JJ,Z.On,Z.EJ,Z.YN,Z.Kr,n.sg],pipes:[n.Ov],styles:[""]}),t})(),U=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-discount"]],decls:1,vars:0,template:function(t,e){1&t&&c._UZ(0,"router-outlet")},directives:[s.lC],styles:[""]}),t})();function E(t,e){1&t&&(c.ynx(0),c._UZ(1,"span",31),c.BQk())}function C(t,e){if(1&t&&(c.ynx(0),c.TgZ(1,"option",35),c._uU(2),c.qZA(),c.BQk()),2&t){const t=e.$implicit;c.xp6(1),c.Q6J("value",t.id),c.xp6(1),c.Oqu(t.title)}}function O(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div",21),c.TgZ(1,"label",16),c._uU(2,"PRODUCTOS : "),c.qZA(),c.TgZ(3,"select",32),c.NdJ("ngModelChange",function(e){return c.CHM(t),c.oxw().product_id=e}),c.TgZ(4,"option",33),c._uU(5,"Ninguno"),c.qZA(),c.YNc(6,C,3,2,"ng-container",34),c.qZA(),c.qZA()}if(2&t){const t=c.oxw();c.xp6(3),c.Q6J("ngModel",t.product_id),c.xp6(3),c.Q6J("ngForOf",t.products)}}function y(t,e){if(1&t&&(c.ynx(0),c.TgZ(1,"option",35),c._uU(2),c.qZA(),c.BQk()),2&t){const t=e.$implicit;c.xp6(1),c.Q6J("value",t.id),c.xp6(1),c.Oqu(t.name)}}function N(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div",21),c.TgZ(1,"label",16),c._uU(2,"CATEGORIA : "),c.qZA(),c.TgZ(3,"select",36),c.NdJ("ngModelChange",function(e){return c.CHM(t),c.oxw().categorie_id=e}),c.TgZ(4,"option",33),c._uU(5,"Ninguno"),c.qZA(),c.YNc(6,y,3,2,"ng-container",34),c.qZA(),c.qZA()}if(2&t){const t=c.oxw();c.xp6(3),c.Q6J("ngModel",t.categorie_id),c.xp6(3),c.Q6J("ngForOf",t.categories)}}function S(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c.TgZ(4,"button",41),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw(2).productD(e)}),c._uU(5,"-"),c.qZA(),c.qZA(),c.qZA()}if(2&t){const t=e.$implicit;c.xp6(2),c.hij(" ",t.name," ")}}function k(t,e){if(1&t&&(c.TgZ(0,"div",37),c.TgZ(1,"div",38),c.TgZ(2,"table",39),c.TgZ(3,"thead"),c.TgZ(4,"tr",40),c.TgZ(5,"th"),c._uU(6,"PRODUCTOS"),c.qZA(),c.TgZ(7,"th"),c._uU(8,"Acci\xf3n"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(9,"tbody"),c.YNc(10,S,6,1,"tr",34),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t){const t=c.oxw();c.xp6(10),c.Q6J("ngForOf",t.products_selected)}}function I(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c.TgZ(4,"button",41),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw(2).categorieD(e)}),c._uU(5,"-"),c.qZA(),c.qZA(),c.qZA()}if(2&t){const t=e.$implicit;c.xp6(2),c.hij(" ",t.name," ")}}function J(t,e){if(1&t&&(c.TgZ(0,"div",37),c.TgZ(1,"div",38),c.TgZ(2,"table",39),c.TgZ(3,"thead"),c.TgZ(4,"tr",40),c.TgZ(5,"th"),c._uU(6,"CATEGORIAS"),c.qZA(),c.TgZ(7,"th"),c._uU(8,"Acci\xf3n"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(9,"tbody"),c.YNc(10,I,6,1,"tr",34),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t){const t=c.oxw();c.xp6(10),c.Q6J("ngForOf",t.categories_selected)}}let D=(()=>{class t{constructor(t,e,i,n){this._descuentosServices=t,this.toaster=e,this.router=i,this.activerouter=n,this.type_discount=1,this.discount=null,this.type_dis=1,this.categories_selected=[],this.products_selected=[],this.categories=[],this.products=[],this.product_id=null,this.categorie_id=null,this.start_date=null,this.end_date=null,this.discount_id=null,this.discount_selected={code:""},this.state=null}ngOnInit(){this.isLoading$=this._descuentosServices.isLoadingSubject,this.activerouter.params.subscribe(t=>{this.discount_id=t.id}),this.configAll(),this._descuentosServices.showDescuento(this.discount_id).subscribe(t=>{console.log(t),this.discount_selected=t.discount,this.type_discount=this.discount_selected.type_discount,this.discount=this.discount_selected.discount,this.start_date=this.discount_selected.start_date,this.end_date=this.discount_selected.end_date,this.state=this.discount_selected.state,this.type_dis=this.discount_selected.type,1==this.type_dis&&this.discount_selected.products.forEach(t=>{let e=this.products.find(e=>e.id==t.product_id);this.products_selected.push({name:e.title,id:e.id})}),2==this.type_dis&&this.discount_selected.categories.forEach(t=>{let e=this.categories.find(e=>e.id==t.categorie_id);this.categories_selected.push({name:e.name,id:e.id})})})}configAll(){this._descuentosServices.configAll().subscribe(t=>{console.log(t),this.categories=t.categories,this.products=t.products})}checkedTypeD(t){this.type_discount=t}checkedTypePC(t){this.type_dis=t,this.products_selected=[],this.categories_selected=[],this.product_id=null,this.categorie_id=null}addObject(){if(1==this.type_dis){let t=this.products.find(t=>t.id==this.product_id);if(-1!=this.products_selected.findIndex(t=>t.id==this.product_id))return void this.toaster.open(o.a,{text:"danger-'EL PRODUCTO YA FUE SELECCIONADO.'"});this.product_id=null,this.products_selected.push({name:t.title,id:t.id})}else{let t=this.categories.find(t=>t.id==this.categorie_id);if(-1!=this.categories_selected.findIndex(t=>t.id==this.categorie_id))return void this.toaster.open(o.a,{text:"danger-'EL CATEGORIA YA FUE SELECCIONADO.'"});this.categorie_id=null,this.categories_selected.push({name:t.name,id:t.id})}}newDiscount(){this.discount<=0?this.toaster.open(o.a,{text:"danger-'EL DESCUENTO TIENE QUE SER MAYOR A 0.'"}):this.start_date&&this.end_date?1!=this.type_dis||0!=this.products_selected.length?2!=this.type_dis||0!=this.categories_selected.length?this._descuentosServices.updateDescuento(this.discount_id,{type_discount:this.type_discount,discount:this.discount,type:this.type_dis,start_date:this.start_date,end_date:this.end_date,products_selected:this.products_selected,categories_selected:this.categories_selected,state:this.state}).subscribe(t=>(console.log(t),403==t.message?void this.toaster.open(o.a,{text:`danger-'${t.message_text}.'`}):void this.toaster.open(o.a,{text:"primary-'SE HA REGISTRADO LOS CAMBIOS DEL DESCUENTO PERFECTAMENTE.'"}))):this.toaster.open(o.a,{text:"danger-'NECESITAS AGREGAR UNA CATEGORIA.'"}):this.toaster.open(o.a,{text:"danger-'NECESITAS AGREGAR UN PRODUCTO.'"}):this.toaster.open(o.a,{text:"danger-'LAS FECHA DE INICIO Y FIN SON OBLIGATORIAS.'"})}productD(t){let e=this.products_selected.findIndex(e=>e.id==t.id);-1!=e&&this.products_selected.splice(e,1)}categorieD(t){let e=this.categories_selected.findIndex(e=>e.id==t.id);-1!=e&&this.categories_selected.splice(e,1)}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(g),c.Y36(p.x7),c.Y36(s.F0),c.Y36(s.gz))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-edit-new-discount"]],decls:76,vars:16,consts:[[1,"card","card-custom","gutter-b"],[1,"card-header"],[1,"card-title"],[1,"card-label"],[1,"icon-2x","text-dark-50","flaticon-interface-3","mx-2"],[1,"card-toolbar"],[1,"card-body"],[4,"ngIf"],[1,"form-group","row"],[1,"col-3"],[1,"form-group"],[1,"radio-inline"],[1,"radio"],["type","radio","name","radiosC","value","1",3,"checked","click"],["type","radio","name","radiosC","value","2",3,"checked","click"],[1,"form-text","text-muted"],[1,"form-label"],["type","number","name","discount","placeholder","50 %","autocomplete","off",1,"form-control","form-control-solid","form-control-lg",3,"ngModel","ngModelChange"],["name","state",1,"form-control","form-control-solid","form-control-lg",3,"ngModel","ngModelChange"],["value","1"],["value","2"],[1,"col-4"],[1,"input-group","input-group-solid"],["type","date",1,"form-control","form-control-lg","form-control-solid",3,"ngModel","ngModelChange"],["type","radio","name","radiosPC","value","1",3,"checked","click"],["type","radio","name","radiosPC","value","2",3,"checked","click"],["class","col-4",4,"ngIf"],[1,"col-1"],[1,"btn","btn-success",3,"click"],["class","col-12",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"spinner","spinner-primary","ml-5"],["name","product_id",1,"form-control","form-control-solid","form-control-lg",3,"ngModel","ngModelChange"],["value",""],[4,"ngFor","ngForOf"],[3,"value"],["name","categorie_id",1,"form-control","form-control-solid","form-control-lg",3,"ngModel","ngModelChange"],[1,"col-12"],[1,"table-responsive"],["id","kt_advance_table_widget_1",1,"table","table-head-custom","table-vertical-center"],[1,"text-left"],[1,"btn","btn-sm","btn-danger",3,"click"]],template:function(t,e){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"h3",3),c._UZ(4,"i",4),c._uU(5),c.qZA(),c.qZA(),c._UZ(6,"div",5),c.qZA(),c.TgZ(7,"div",6),c.YNc(8,E,2,0,"ng-container",7),c.ALo(9,"async"),c.TgZ(10,"div",8),c.TgZ(11,"div",9),c.TgZ(12,"div",10),c.TgZ(13,"label"),c._uU(14,"TIPO DE DESCUENTO: "),c.qZA(),c.TgZ(15,"div",11),c.TgZ(16,"label",12),c.TgZ(17,"input",13),c.NdJ("click",function(){return e.checkedTypeD(1)}),c.qZA(),c._UZ(18,"span"),c._uU(19," PORCENTAJE "),c.qZA(),c.TgZ(20,"label",12),c.TgZ(21,"input",14),c.NdJ("click",function(){return e.checkedTypeD(2)}),c.qZA(),c._UZ(22,"span"),c._uU(23," MONEDA "),c.qZA(),c.qZA(),c.TgZ(24,"span",15),c._uU(25,"Selec. una opci\xf3n"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(26,"div",9),c.TgZ(27,"label",16),c._uU(28,"DESCUENTO: "),c.qZA(),c.TgZ(29,"input",17),c.NdJ("ngModelChange",function(t){return e.discount=t}),c.qZA(),c.qZA(),c.TgZ(30,"div",9),c.TgZ(31,"label",16),c._uU(32,"STATUS : "),c.qZA(),c.TgZ(33,"select",18),c.NdJ("ngModelChange",function(t){return e.state=t}),c.TgZ(34,"option",19),c._uU(35,"ACTIVO"),c.qZA(),c.TgZ(36,"option",20),c._uU(37,"INACTIVO"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(38,"div",8),c.TgZ(39,"div",21),c.TgZ(40,"label"),c._uU(41,"Fecha inicio: *"),c.qZA(),c.TgZ(42,"div",22),c.TgZ(43,"input",23),c.NdJ("ngModelChange",function(t){return e.start_date=t}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(44,"div",21),c.TgZ(45,"label"),c._uU(46,"Fecha fin: "),c.qZA(),c.TgZ(47,"div",22),c.TgZ(48,"input",23),c.NdJ("ngModelChange",function(t){return e.end_date=t}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(49,"div",8),c.TgZ(50,"div",9),c.TgZ(51,"div",10),c.TgZ(52,"label"),c._uU(53,"TIPO DE PRODUCTOS/CATEGORIAS: "),c.qZA(),c.TgZ(54,"div",11),c.TgZ(55,"label",12),c.TgZ(56,"input",24),c.NdJ("click",function(){return e.checkedTypePC(1)}),c.qZA(),c._UZ(57,"span"),c._uU(58," PRODUCTOS "),c.qZA(),c.TgZ(59,"label",12),c.TgZ(60,"input",25),c.NdJ("click",function(){return e.checkedTypePC(2)}),c.qZA(),c._UZ(61,"span"),c._uU(62," CATEGORIAS "),c.qZA(),c.qZA(),c.TgZ(63,"span",15),c._uU(64,"Selec. una opci\xf3n"),c.qZA(),c.qZA(),c.qZA(),c.YNc(65,O,7,2,"div",26),c.YNc(66,N,7,2,"div",26),c.TgZ(67,"div",27),c.TgZ(68,"button",28),c.NdJ("click",function(){return e.addObject()}),c._uU(69,"+"),c.qZA(),c.qZA(),c.YNc(70,k,11,1,"div",29),c.YNc(71,J,11,1,"div",29),c.qZA(),c.TgZ(72,"div",8),c.TgZ(73,"div",9),c.TgZ(74,"button",30),c.NdJ("click",function(){return e.newDiscount()}),c._uU(75,"EDITAR DESCUENTO"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(5),c.hij(" EDITAR DESCUENTO: (",e.discount_selected.code,")"),c.xp6(3),c.Q6J("ngIf",c.lcZ(9,14,e.isLoading$)),c.xp6(9),c.Q6J("checked",1==e.type_discount),c.xp6(4),c.Q6J("checked",2==e.type_discount),c.xp6(8),c.Q6J("ngModel",e.discount),c.xp6(4),c.Q6J("ngModel",e.state),c.xp6(10),c.Q6J("ngModel",e.start_date),c.xp6(5),c.Q6J("ngModel",e.end_date),c.xp6(8),c.Q6J("checked",1==e.type_dis),c.xp6(4),c.Q6J("checked",2==e.type_dis),c.xp6(5),c.Q6J("ngIf",1==e.type_dis),c.xp6(1),c.Q6J("ngIf",2==e.type_dis),c.xp6(4),c.Q6J("ngIf",1==e.type_dis),c.xp6(1),c.Q6J("ngIf",2==e.type_dis))},directives:[n.O5,Z.wV,Z.Fj,Z.JJ,Z.On,Z.EJ,Z.YN,Z.Kr,n.sg],pipes:[n.Ov],styles:[""]}),t})();var L=i(46469);function M(t,e){1&t&&(c.ynx(0),c.TgZ(1,"div",9),c._UZ(2,"div",10),c.qZA(),c.BQk())}function w(t,e){1&t&&(c.ynx(0),c.TgZ(1,"div",11),c._UZ(2,"div",12),c.qZA(),c.BQk())}let Q=(()=>{class t{constructor(t,e){this._descuentoServices=t,this.modal=e,this.discount_selected=null,this.discountE=new c.vpe,this.isLoading=!1}ngOnInit(){this.isLoading$=this._descuentoServices.isLoading$}delete(){this._descuentoServices.deleteDescuento(this.discount_selected.id).subscribe(t=>{console.log(t),this.modal.close(),this.discountE.emit(this.discount_selected)})}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(g),c.Y36(L.Kz))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-delete-new-discount"]],inputs:{discount_selected:"discount_selected"},outputs:{discountE:"discountE"},decls:18,vars:6,consts:[[4,"ngIf"],[1,"modal-content"],[1,"modal-header"],["id","example-modal-sizes-title-lg",1,"modal-title","h4"],[1,"icon-2x","text-dark-50","fas","fa-user-times","mx-2"],[1,"overlay","overlay-block","cursor-default","modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-light","btn-elevate","mr-2",3,"click"],["type","submit",1,"btn","btn-danger","btn-elevate","mr-2",3,"click"],[1,"progress","progress-modal"],["role","progressbar","aria-valuenow","100","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped","progress-bar-animated","bg-primary",2,"width","100%"],[1,"overlay-layer","bg-transparent"],[1,"spinner","spinner-lg","spinner-success"]],template:function(t,e){1&t&&(c.YNc(0,M,3,0,"ng-container",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c._UZ(4,"i",4),c._uU(5),c.qZA(),c.qZA(),c.TgZ(6,"div",5),c.YNc(7,w,3,0,"ng-container",0),c.ALo(8,"async"),c.TgZ(9,"span"),c._uU(10,"\xbfESTAS SEGURO DE ELIMINAR ESTE DESCUENTO ?: "),c.TgZ(11,"b"),c._uU(12),c.qZA(),c.qZA(),c.qZA(),c.TgZ(13,"div",6),c.TgZ(14,"button",7),c.NdJ("click",function(){return e.modal.dismiss()}),c._uU(15," Cancel "),c.qZA(),c.TgZ(16,"button",8),c.NdJ("click",function(){return e.delete()}),c._uU(17," ELIMINAR "),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.Q6J("ngIf",e.isLoading),c.xp6(5),c.hij(" Eliminar DESCUENTO : ",e.discount_selected.code," "),c.xp6(2),c.Q6J("ngIf",c.lcZ(8,4,e.isLoading$)),c.xp6(5),c.Oqu(e.discount_selected.code))},directives:[n.O5],pipes:[n.Ov],styles:[""]}),t})();function R(t,e){1&t&&(c.ynx(0),c._UZ(1,"span",23),c.BQk())}function F(t,e){1&t&&(c.TgZ(0,"span",37),c._uU(1,"ACTIVO"),c.qZA())}function Y(t,e){1&t&&(c.TgZ(0,"span",38),c._uU(1,"DES-ACTIVO"),c.qZA())}const P=function(t){return["/descuento/editar-descuento/",t]};function $(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td"),c._uU(8),c.qZA(),c.TgZ(9,"th"),c._uU(10),c.qZA(),c.TgZ(11,"td"),c.YNc(12,F,2,0,"span",24),c.YNc(13,Y,2,0,"span",25),c.qZA(),c.TgZ(14,"td"),c.TgZ(15,"a",26),c.TgZ(16,"span",27),c.O4$(),c.TgZ(17,"svg",28),c.TgZ(18,"g",29),c._UZ(19,"rect",30),c._UZ(20,"path",31),c._UZ(21,"path",32),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.kcU(),c.TgZ(22,"a",33),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw().delete(e)}),c.TgZ(23,"span",34),c.O4$(),c.TgZ(24,"svg",28),c.TgZ(25,"g",29),c._UZ(26,"rect",30),c._UZ(27,"path",35),c._UZ(28,"path",36),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&t){const t=e.$implicit,i=c.oxw();c.xp6(2),c.Oqu(t.code),c.xp6(2),c.Oqu(i.getTypeDiscount(t.type_discount)),c.xp6(2),c.Oqu(t.discount),c.xp6(2),c.Oqu(i.getTypeDes(t)),c.xp6(2),c.Oqu(t.start_date+" / "+t.end_date),c.xp6(2),c.Q6J("ngIf",1==t.state),c.xp6(1),c.Q6J("ngIf",2==t.state),c.xp6(2),c.Q6J("routerLink",c.VKq(8,P,t.id))}}const j=[{path:"",component:U,children:[{path:"registrar-descuento",component:x},{path:"editar-descuento/:id",component:D},{path:"lista-descuentos",component:(()=>{class t{constructor(t,e){this._discountServices=t,this._modalService=e,this.discounts=[],this.search=null}ngOnInit(){this.isLoading$=this._discountServices.isLoadingSubject,this.allDescuentos()}allDescuentos(){this._discountServices.allDescuentos(1,this.search).subscribe(t=>{console.log(t),this.discounts=t.discounts.data})}reset(){this.search=null,this.allDescuentos()}getTypeDiscount(t){return 1==t?"PORCENTAJE":"MONEDA"}getTypeDes(t){return t.products?"PRODUCTOS":"CATEGORIAS"}delete(t){const e=this._modalService.open(Q,{centered:!0,size:"sm"});e.componentInstance.discount_selected=t,e.result.then(()=>{},()=>{}),e.componentInstance.discountE.subscribe(t=>{let e=this.discounts.findIndex(e=>e.id==t.id);this.discounts.splice(e,1)})}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(g),c.Y36(L.FF))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-list-discounts"]],decls:45,vars:7,consts:[[1,"card","card-custom","gutter-b"],[1,"card-header"],[1,"card-title"],[1,"card-label"],[1,"icon-2x","text-dark-50","flaticon-interface-3","mx-2"],[1,"card-toolbar"],["type","button","routerLink","/descuento/registrar-descuento",1,"btn","btn-primary"],[1,"icon-2x","text-white","flaticon-file-1"],[1,"card-body"],[4,"ngIf"],[1,"row"],[1,"col-6"],["type","text","name","searchText","placeholder","Buscar","value","",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-text","text-muted"],[1,"col-3"],["placement","top",1,"btn","btn-primary","ml-2",3,"ngbTooltip","click"],[1,"icon","text-white","flaticon-search-1"],["placement","top",1,"btn","btn-dark","ml-2",3,"ngbTooltip","click"],[1,"icon","text-white","flaticon-refresh"],[1,"table-responsive"],["id","kt_advance_table_widget_1",1,"table","table-head-custom","table-vertical-center"],[1,"text-left"],[4,"ngFor","ngForOf"],[1,"spinner","spinner-primary","ml-5"],["class","label label-lg label-inline label-light-success",4,"ngIf"],["class","label label-lg label-inline label-light-danger",4,"ngIf"],["ngbTooltip","Editar descuento","ngbTooltipClass","kt-tooltip",1,"btn","btn-icon","btn-light","btn-hover-primary","btn-sm","mx-1",3,"routerLink"],[1,"svg-icon","svg-icon-md","svg-icon-primary"],["xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","width","24px","height","24px","viewBox","0 0 24 24","version","1.1"],["stroke","none","stroke-width","1","fill","none","fill-rule","evenodd"],["x","0","y","0","width","24","height","24"],["d","M12.2674799,18.2323597 L12.0084872,5.45852451 C12.0004303,5.06114792 12.1504154,4.6768183 12.4255037,4.38993949 L15.0030167,1.70195304 L17.5910752,4.40093695 C17.8599071,4.6812911 18.0095067,5.05499603 18.0083938,5.44341307 L17.9718262,18.2062508 C17.9694575,19.0329966 17.2985816,19.701953 16.4718324,19.701953 L13.7671717,19.701953 C12.9505952,19.701953 12.2840328,19.0487684 12.2674799,18.2323597 Z","fill","#000000","fill-rule","nonzero","transform","translate(14.701953, 10.701953) rotate(-135.000000) translate(-14.701953, -10.701953)"],["d","M12.9,2 C13.4522847,2 13.9,2.44771525 13.9,3 C13.9,3.55228475 13.4522847,4 12.9,4 L6,4 C4.8954305,4 4,4.8954305 4,6 L4,18 C4,19.1045695 4.8954305,20 6,20 L18,20 C19.1045695,20 20,19.1045695 20,18 L20,13 C20,12.4477153 20.4477153,12 21,12 C21.5522847,12 22,12.4477153 22,13 L22,18 C22,20.209139 20.209139,22 18,22 L6,22 C3.790861,22 2,20.209139 2,18 L2,6 C2,3.790861 3.790861,2 6,2 L12.9,2 Z","fill","#000000","fill-rule","nonzero","opacity","0.3"],["ngbTooltip","Eliminar descuento","ngbTooltipClass","kt-tooltip",1,"btn","btn-icon","btn-light","btn-hover-primary","btn-sm",3,"click"],[1,"svg-icon","svg-icon-md","svg-icon-danger"],["d","M6,8 L6,20.5 C6,21.3284271 6.67157288,22 7.5,22 L16.5,22 C17.3284271,22 18,21.3284271 18,20.5 L18,8 L6,8 Z","fill","#000000","fill-rule","nonzero"],["d","M14,4.5 L14,4 C14,3.44771525 13.5522847,3 13,3 L11,3 C10.4477153,3 10,3.44771525 10,4 L10,4.5 L5.5,4.5 C5.22385763,4.5 5,4.72385763 5,5 L5,5.5 C5,5.77614237 5.22385763,6 5.5,6 L18.5,6 C18.7761424,6 19,5.77614237 19,5.5 L19,5 C19,4.72385763 18.7761424,4.5 18.5,4.5 L14,4.5 Z","fill","#000000","opacity","0.3"],[1,"label","label-lg","label-inline","label-light-success"],[1,"label","label-lg","label-inline","label-light-danger"]],template:function(t,e){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"h3",3),c._UZ(4,"i",4),c._uU(5," Lista de DESCUENTOS "),c.qZA(),c.qZA(),c.TgZ(6,"div",5),c.TgZ(7,"a",6),c._UZ(8,"i",7),c._uU(9," NUEVO DESCUENTO"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(10,"div",8),c.YNc(11,R,2,0,"ng-container",9),c.ALo(12,"async"),c.TgZ(13,"div",10),c.TgZ(14,"div",11),c.TgZ(15,"input",12),c.NdJ("ngModelChange",function(t){return e.search=t}),c.qZA(),c.TgZ(16,"small",13),c.TgZ(17,"b"),c._uU(18,"Buscar"),c.qZA(),c._uU(19," por c\xf3digo de descuento"),c.qZA(),c.qZA(),c.TgZ(20,"div",14),c.TgZ(21,"button",15),c.NdJ("click",function(){return e.allDescuentos()}),c._UZ(22,"i",16),c.qZA(),c.TgZ(23,"button",17),c.NdJ("click",function(){return e.reset()}),c._UZ(24,"i",18),c.qZA(),c.qZA(),c.qZA(),c.TgZ(25,"div",19),c.TgZ(26,"table",20),c.TgZ(27,"thead"),c.TgZ(28,"tr",21),c.TgZ(29,"th"),c._uU(30,"CODIGO"),c.qZA(),c.TgZ(31,"th"),c._uU(32,"TIPO DE DESCUENTO"),c.qZA(),c.TgZ(33,"th"),c._uU(34,"DESCUENTO"),c.qZA(),c.TgZ(35,"th"),c._uU(36,"TIPO DE CT/PD"),c.qZA(),c.TgZ(37,"th"),c._uU(38,"FECHAS"),c.qZA(),c.TgZ(39,"th"),c._uU(40,"STATUS"),c.qZA(),c.TgZ(41,"th"),c._uU(42,"ACCIONES"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(43,"tbody"),c.YNc(44,$,29,10,"tr",22),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(11),c.Q6J("ngIf",c.lcZ(12,5,e.isLoading$)),c.xp6(4),c.Q6J("ngModel",e.search),c.xp6(6),c.Q6J("ngbTooltip","Filtro"),c.xp6(2),c.Q6J("ngbTooltip","Reset"),c.xp6(21),c.Q6J("ngForOf",e.discounts))},directives:[s.yS,n.O5,Z.Fj,Z.JJ,Z.On,L._L,n.sg],pipes:[n.Ov],styles:[""]}),t})()},{path:"",redirectTo:"lista-descuentos",pathMatch:"full"},{path:"**",redirectTo:"lista-descuentos",pathMatch:"full"}]}];let G=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[s.Bz.forChild(j)],s.Bz]}),t})();var B=i(73749),z=i(85848);let H=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[n.ez,G,d.JF,Z.u5,L.IJ,Z.UX,B.vi,z.fA,L.bz,L.M]]}),t})()}}]);