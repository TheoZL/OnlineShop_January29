!function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,r=void 0,"symbol"==typeof(r=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?r:String(r)),i)}var o,r}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(self.webpackChunkmetronic_angular_demo1=self.webpackChunkmetronic_angular_demo1||[]).push([[48],{98048:function(e,i,o){o.r(i),o.d(i,{SalesModule:function(){return C}});var r=o(16274),a=o(65543),l=o(42741),c=o(46469);function s(t,e){if(1&t&&(l.ynx(0),l._UZ(1,"br"),l.TgZ(2,"small"),l._uU(3),l.qZA(),l._UZ(4,"br"),l.TgZ(5,"small"),l._uU(6),l.qZA(),l._UZ(7,"br"),l.TgZ(8,"del"),l._uU(9),l.qZA(),l.BQk()),2&t){var n=l.oxw().$implicit,i=l.oxw();l.xp6(3),l.hij("CUP\xd3N: ",n.code_cupon,""),l.xp6(3),l.AsE("DESCUENTO: ",n.discount," ",1==n.type_discount?"%":i.sale.currency_payment,""),l.xp6(3),l.AsE("PRECIO UNITARIO: ",n.precio_unitario," ",i.sale.currency_payment,"")}}function u(t,e){if(1&t&&(l.TgZ(0,"tr"),l.TgZ(1,"td"),l._uU(2),l.qZA(),l.TgZ(3,"td"),l._UZ(4,"img",13),l.qZA(),l.TgZ(5,"td",14),l._uU(6),l.qZA(),l.TgZ(7,"td",14),l._uU(8),l.YNc(9,s,10,5,"ng-container",15),l.qZA(),l.TgZ(10,"td",14),l._uU(11),l.qZA(),l.qZA()),2&t){var n=e.$implicit,i=l.oxw();l.xp6(2),l.Oqu(n.title),l.xp6(2),l.Q6J("src",n.imagen,l.LSH),l.xp6(2),l.Oqu(n.cantidad),l.xp6(2),l.AsE(" ",n.subtotal," ",i.sale.currency_payment," "),l.xp6(1),l.Q6J("ngIf",n.code_cupon),l.xp6(2),l.AsE("",n.total," ",i.sale.currency_payment,"")}}var d,g=((d=function(){function e(n){t(this,e),this.modal=n}return n(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(t){return new(t||d)(l.Y36(c.Kz))},d.\u0275cmp=l.Xpm({type:d,selectors:[["app-detail-sales-list"]],inputs:{sale:"sale"},decls:27,vars:2,consts:[[1,"modal-content"],[1,"modal-header"],["id","example-modal-sizes-title-lg",1,"modal-title","h4"],[1,"icon-2x","text-dark-50","flaticon-cart","mx-2"],[1,"overlay","overlay-block","cursor-default","modal-body"],[1,"row"],[1,"col-12"],[1,"table-responsive"],["id","kt_advance_table_widget_1",1,"table","table-head-custom","table-vertical-center"],[1,"text-left"],[4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-light","btn-elevate","mr-2",3,"click"],["width","90","alt","","srcset","",3,"src"],[1,"text-nowrap"],[4,"ngIf"]],template:function(t,e){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l._UZ(3,"i",3),l._uU(4),l.qZA(),l.qZA(),l.TgZ(5,"div",4),l.TgZ(6,"div",5),l.TgZ(7,"div",6),l.TgZ(8,"div",7),l.TgZ(9,"table",8),l.TgZ(10,"thead"),l.TgZ(11,"tr",9),l.TgZ(12,"th"),l._uU(13,"PRODUCTO"),l.qZA(),l.TgZ(14,"th"),l._uU(15,"PORTADA"),l.qZA(),l.TgZ(16,"th"),l._uU(17,"CANTIDAD"),l.qZA(),l.TgZ(18,"th"),l._uU(19,"SUBTOTAL"),l.qZA(),l.TgZ(20,"th"),l._uU(21,"TOTAL"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(22,"tbody"),l.YNc(23,u,12,8,"tr",10),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(24,"div",11),l.TgZ(25,"button",12),l.NdJ("click",function(){return e.modal.dismiss()}),l._uU(26," Cerrar "),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(4),l.hij(" VER ORDEN: #",e.sale.n_transaccion," "),l.xp6(19),l.Q6J("ngForOf",e.sale.items))},directives:[r.sg,r.O5],styles:[""]}),d),Z=o(31887),p=o(29923),h=o(27813),f=o(4565),A=o(29640),T=function(){var e=function(){function e(n,i){t(this,e),this.http=n,this.authservice=i,this.isLoadingSubject=new p.X(!1),this.isLoading$=this.isLoadingSubject.asObservable()}return n(e,[{key:"allSales",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1?arguments[1]:void 0;this.isLoadingSubject.next(!0);var i=new Z.WM({Authorization:"Bearer "+this.authservice.token});return this.http.post(f.$g+"/sales/all?page="+e,n,{headers:i}).pipe((0,h.x)(function(){return t.isLoadingSubject.next(!1)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.LFG(Z.eN),l.LFG(A.e8))},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),v=o(93324);function _(t,e){1&t&&(l.ynx(0),l._UZ(1,"span",26),l.BQk())}function m(t,e){if(1&t&&(l.ynx(0),l.TgZ(1,"option",27),l._uU(2),l.qZA(),l.BQk()),2&t){var n=e.$implicit;l.xp6(1),l.Q6J("value",n.id),l.xp6(1),l.Oqu(n.name)}}function q(t,e){if(1&t){var n=l.EpF();l.TgZ(0,"tr"),l.TgZ(1,"td"),l._uU(2),l.qZA(),l.TgZ(3,"td"),l._uU(4),l.qZA(),l.TgZ(5,"td"),l._uU(6),l.qZA(),l.TgZ(7,"td"),l._uU(8),l.qZA(),l.TgZ(9,"td"),l._uU(10),l.qZA(),l.TgZ(11,"td"),l.TgZ(12,"a",28),l.NdJ("click",function(){var t=l.CHM(n).$implicit;return l.oxw().showDetail(t)}),l.TgZ(13,"span",29),l.O4$(),l.TgZ(14,"svg",30),l.TgZ(15,"g",31),l._UZ(16,"rect",32),l._UZ(17,"path",33),l._UZ(18,"path",34),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&t){var i=e.$implicit;l.xp6(2),l.Oqu(i.n_transaccion),l.xp6(2),l.Oqu(i.method_payment),l.xp6(2),l.Oqu(i.currency_total),l.xp6(2),l.Oqu(i.user.full_name.toUpperCase()),l.xp6(2),l.AsE("",i.total," ",i.currency_payment,"")}}var b=[{path:"",component:function(){var e=function(){function e(){t(this,e)}return n(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-sales"]],decls:1,vars:0,template:function(t,e){1&t&&l._UZ(0,"router-outlet")},directives:[a.lC],styles:[""]}),e}(),children:[{path:"lista-de-ordenes",component:function(){var e=function(){function e(n,i){t(this,e),this._salesServices=n,this._modelService=i,this.SALES=[],this.isLoading$=null,this.search=null,this.categories=[],this.categorie_id="",this.start_date=null,this.end_date=null}return n(e,[{key:"ngOnInit",value:function(){this.isLoading$=this._salesServices.isLoadingSubject,this.allSales()}},{key:"allSales",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this._salesServices.allSales(e,{search:this.search,categorie_id:this.categorie_id,start_date:this.start_date,end_date:this.end_date}).subscribe(function(e){console.log(e),t.SALES=e.orders.data,t.categorie_id||(t.categories=e.categories)})}},{key:"reset",value:function(){this.search=null,this.categorie_id=null,this.start_date=null,this.end_date=null,this.allSales()}},{key:"showDetail",value:function(t){var e=this._modelService.open(g,{centered:!0,size:"md"});e.componentInstance.sale=t,e.result.then(function(){},function(){})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Y36(T),l.Y36(c.FF))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-sales-list"]],decls:59,vars:11,consts:[[1,"card","card-custom","gutter-b"],[1,"card-header"],[1,"card-title"],[1,"card-label"],[1,"icon-2x","text-dark-50","flaticon-presentation-1","mx-2"],[1,"card-toolbar"],[1,"card-body"],[4,"ngIf"],[1,"row"],[1,"col-3"],["type","text","name","searchText","placeholder","Buscar","value","",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-text","text-muted"],[1,"form-label"],["name","categorie_id",1,"form-control","form-control-solid","form-control-lg",3,"ngModel","ngModelChange"],["value",""],[4,"ngFor","ngForOf"],[1,"col-12"],[1,"input-group","input-group-solid"],["type","date",1,"form-control","form-control-lg","form-control-solid",3,"ngModel","ngModelChange"],["placement","top",1,"btn","btn-primary","ml-2",3,"ngbTooltip","click"],[1,"icon","text-white","flaticon-search-1"],["placement","top",1,"btn","btn-dark","ml-2",3,"ngbTooltip","click"],[1,"icon","text-white","flaticon-refresh"],[1,"table-responsive"],["id","kt_advance_table_widget_1",1,"table","table-head-custom","table-vertical-center"],[1,"text-left"],[1,"spinner","spinner-primary","ml-5"],[3,"value"],["ngbTooltip","Detalle de la Orden","ngbTooltipClass","kt-tooltip",1,"btn","btn-icon","btn-light","btn-hover-info","btn-sm",3,"click"],[1,"svg-icon","svg-icon-md","svg-icon-info"],["xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","width","24px","height","24px","viewBox","0 0 24 24","version","1.1"],["stroke","none","stroke-width","1","fill","none","fill-rule","evenodd"],["x","0","y","0","width","24","height","24"],["d","M18.1446364,11.84388 L17.4471627,16.0287218 C17.4463569,16.0335568 17.4455155,16.0383857 17.4446387,16.0432083 C17.345843,16.5865846 16.8252597,16.9469884 16.2818833,16.8481927 L4.91303792,14.7811299 C4.53842737,14.7130189 4.23500006,14.4380834 4.13039941,14.0719812 L2.30560137,7.68518803 C2.28007524,7.59584656 2.26712532,7.50338343 2.26712532,7.4104669 C2.26712532,6.85818215 2.71484057,6.4104669 3.26712532,6.4104669 L16.9929851,6.4104669 L17.606173,3.78251876 C17.7307772,3.24850086 18.2068633,2.87071314 18.7552257,2.87071314 L20.8200821,2.87071314 C21.4717328,2.87071314 22,3.39898039 22,4.05063106 C22,4.70228173 21.4717328,5.23054898 20.8200821,5.23054898 L19.6915238,5.23054898 L18.1446364,11.84388 Z","fill","#000000","opacity","0.3"],["d","M6.5,21 C5.67157288,21 5,20.3284271 5,19.5 C5,18.6715729 5.67157288,18 6.5,18 C7.32842712,18 8,18.6715729 8,19.5 C8,20.3284271 7.32842712,21 6.5,21 Z M15.5,21 C14.6715729,21 14,20.3284271 14,19.5 C14,18.6715729 14.6715729,18 15.5,18 C16.3284271,18 17,18.6715729 17,19.5 C17,20.3284271 16.3284271,21 15.5,21 Z","fill","#000000"]],template:function(t,e){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"h3",3),l._UZ(4,"i",4),l._uU(5," Lista de ordenes de compras"),l.qZA(),l.qZA(),l._UZ(6,"div",5),l.qZA(),l.TgZ(7,"div",6),l.YNc(8,_,2,0,"ng-container",7),l.ALo(9,"async"),l.TgZ(10,"div",8),l.TgZ(11,"div",9),l.TgZ(12,"input",10),l.NdJ("ngModelChange",function(t){return e.search=t}),l.qZA(),l.TgZ(13,"small",11),l.TgZ(14,"b"),l._uU(15,"Buscar"),l.qZA(),l._uU(16," por nombre de CLIENTE"),l.qZA(),l.qZA(),l.TgZ(17,"div",9),l.TgZ(18,"label",12),l._uU(19,"CATEGORIA : "),l.qZA(),l.TgZ(20,"select",13),l.NdJ("ngModelChange",function(t){return e.categorie_id=t}),l.TgZ(21,"option",14),l._uU(22,"Ninguno"),l.qZA(),l.YNc(23,m,3,2,"ng-container",15),l.qZA(),l.qZA(),l.TgZ(24,"div",9),l.TgZ(25,"div",8),l.TgZ(26,"div",16),l.TgZ(27,"label"),l._uU(28,"Fecha inicio: "),l.qZA(),l.TgZ(29,"div",17),l.TgZ(30,"input",18),l.NdJ("ngModelChange",function(t){return e.start_date=t}),l.qZA(),l.qZA(),l.qZA(),l.TgZ(31,"div",16),l.TgZ(32,"label"),l._uU(33,"Fecha fin: "),l.qZA(),l.TgZ(34,"div",17),l.TgZ(35,"input",18),l.NdJ("ngModelChange",function(t){return e.end_date=t}),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(36,"div",9),l.TgZ(37,"button",19),l.NdJ("click",function(){return e.allSales()}),l._UZ(38,"i",20),l.qZA(),l.TgZ(39,"button",21),l.NdJ("click",function(){return e.reset()}),l._UZ(40,"i",22),l.qZA(),l.qZA(),l.qZA(),l.TgZ(41,"div",23),l.TgZ(42,"table",24),l.TgZ(43,"thead"),l.TgZ(44,"tr",25),l.TgZ(45,"th"),l._uU(46,"N\xb0 TRANSACCI\xd3N"),l.qZA(),l.TgZ(47,"th"),l._uU(48,"METODO DE PAGO"),l.qZA(),l.TgZ(49,"th"),l._uU(50,"TIPO DE MONEDA DE LA VENTA"),l.qZA(),l.TgZ(51,"th"),l._uU(52,"CLIENTE"),l.qZA(),l.TgZ(53,"th"),l._uU(54,"TOTAL"),l.qZA(),l.TgZ(55,"th"),l._uU(56,"ACCI\xd3N"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(57,"tbody"),l.YNc(58,q,19,6,"tr",15),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(8),l.Q6J("ngIf",l.lcZ(9,9,e.isLoading$)),l.xp6(4),l.Q6J("ngModel",e.search),l.xp6(8),l.Q6J("ngModel",e.categorie_id),l.xp6(3),l.Q6J("ngForOf",e.categories),l.xp6(7),l.Q6J("ngModel",e.start_date),l.xp6(5),l.Q6J("ngModel",e.end_date),l.xp6(2),l.Q6J("ngbTooltip","Filtro"),l.xp6(2),l.Q6J("ngbTooltip","Reset"),l.xp6(19),l.Q6J("ngForOf",e.SALES))},directives:[r.O5,v.Fj,v.JJ,v.On,v.EJ,v.YN,v.Kr,r.sg,c._L],pipes:[r.Ov],styles:[""]}),e}()},{path:"",redirectTo:"lista-de-ordenes",pathMatch:"full"},{path:"**",redirectTo:"lista-de-ordenes",pathMatch:"full"}]}],x=function(){var e=n(function e(){t(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[a.Bz.forChild(b)],a.Bz]}),e}(),y=o(73749),U=o(85848),C=function(){var e=n(function e(){t(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[r.ez,x,Z.JF,v.u5,c.IJ,v.UX,y.vi,U.fA,c.bz,c.M]]}),e}()}}])}();